\documentclass[a4paper,10pt]{article}
\usepackage[latin1]{inputenc}
\usepackage[catalan]{babel}
\usepackage{fancyhdr}
\usepackage{graphicx}

%% Capcaleres de les pagines
\fancypagestyle{plain}{%
  \fancyhf{}
  \fancyfoot[R]{\footnotesize\textrm{\thepage}}
  \fancyfoot[L]{\footnotesize\textit{Informe premilinar: Implementació de l'algorisme ROAM}}
  \renewcommand{\headrulewidth}{0pt}%
}
\pagestyle{plain}

% Title Page
\title{Informe premilinar de Projecte Final de Carrera\\
Implementació de l'algorisme ROAM}
\author{Projectista: Albert Astals Cid\\
Director: Lluís Pérez Vidal}


\begin{document}
\maketitle

\section{Què és l'algorisme ROAM?}
\paragraph{}
L'algorisme ROAM\footnote{http://www.llnl.gov/graphics/ROAM/roam.pdf} \textit{(Real-time Optimally Adapting Meshes)} és un algorisme de visualització de terrenys. La particularitat d'aquest algorisme és que la malla de triangles es genera tenint en compte la posició de l'observador i que aquesta va evolucionant segons l'observador es mou. En aquesta malla de triangles cada vèrtex de cada triangle té l'alçada real que li correspon, per tant a més triangles, més exactitud en la representació del terreny.

\paragraph{}
La generació de la malla de triangles es fa a partir de 2 triangles isòsceles que formen un quadrat i representen tota la superfície. A partir d'aquí es van partint els triangles en dos per aconseguir més precisió en la representació. Per decidir quin és el triangle que es partirà es mira l'alçada real que té la posició de la meitat de l'aresta base\footnote{Anomenen aresta base a aquella aresta del triangle isosceles que no és igual a cap altre} i quina és l'alçada que té a la representació (la mitjana de les alçades dels dos vèrtexs d'aquesta aresta) i es calcula un error. Aquest error es pondera segons la posició de l'observador ja que no és el mateix tenir un error $\varepsilon$ a un triangle que es troba molt lluny de l'observador que en un triangle que està aprop. El triangle amb més error ponderat és el que es parteix.

\paragraph{}
Un cop hem arribat a una quantitat de triangles donada i l'error causat pels triangles està per sota del llindar donat s'ha acabat la creació de la malla i es pasa a la visualització. L'algorisme torna a entrar en lloc quan l'observador es mou. En aquest moment la distància de cada triangle respecte a l'observador canvia i, per tant, també ho fa l'error ponderat, això pot fet que grups de 4 triangles es fusionin en 2 triangles ja que la nova posició de l'observador fa que no calgui tanta presició en aquesta regió del terreny, o que es parteixin nous triangles per fer més exactes regions que amb la posició anterior ja eren prou bones.

\newpage
\section{Descripció dels objectius del projecte}
\paragraph{}
L'objectiu principal del projecte és contruir una aplicació lliure que faci servir l'algorisme ROAM. Donat que l'algorisme ROAM tracta estrictament de com crear una malla de triangles a partir d'unes alçades donades, també caldrà implementar altres funcionalitats, com una interfície gràfica amb la qual l'usuari pugui interactuar i un lector d'algun format de fitxer d'on obtenir les dades de les alçades, en aquest cas s'ha decidit usar el format DEM.

\subsection{Aplicació lliure}
\paragraph{}
Tant el projectista com el director del PFC han decidit que l'aplicació resultant es trobarà sota la llicència GPL\footnote{http://en.wikipedia.org/wiki/GPL}, una de les llicències lliures més esteses. Això permetrà l'accès total al codi i l'ús lliure de l'aplicació per part de qualsevol persona així com que l'aplicació pugui ser millorada per terceres persones en un futur i que tothom s'hi beneficiï.

\subsection{Interfície gràfica}
\label{subsec:ig}
\paragraph{}
La interfície gràfica ha de ser simple ja que el que es vol és que l'usuari pugui fer servir el programa sense haver-se de parar a pensar com es fan les coses. Per això la interfície es reduirà bàsicament a un programa a pantalla completa on es realitzarà la visualització del terreny. L'orientació de l'observador es controlarà amb el ratolí mentre que les tecles seran les encarregades de moure l'observador. Hi haurà un diàleg amb el qual l'usuari podrà decidir quin fitxer de terreny vol visualitzar.
\paragraph{}
Per la implementació d'aquesta interfície s'ha decidit utilitzar la llibrería gràfica Qt\footnote{http://www.trolltech.com/products/qt/index.html} degut a ser una llibreria multiplataforma (Windows/Linux/Mac) i lliure\footnote{La versió actual Qt3 només té llicència lliure (GPL) per a les plataformes Linux i Mac encara que la companyia que desenvolupa Qt ha dit públicament que la versió Qt4 també tindrà versió GPL per a Windows}. Aquests dos fets són importants ja que garanteixen que l'aplicació pugui ser lliure(no es pot fer servir una llibreria no GPL en un programa GPL) i que el programa resultant s'executarà a la majoria de plataformes actuals.
\paragraph{}
Un altre dels objectius que volem tenir en la programació de la interfície gràfica és que estigui completament separada del funcionament de l'algorisme, de forma que si en algun moment es vol canviar de llibreria gràfica només calgui reescriure el codi relacionat amb la interfície gràfica i no tocar totes les parts del programa.

\newpage
\subsection{Lector de format DEM}
\paragraph{}
L'algorisme ROAM necessita conèixer les alçades dels punts de la superfície per generar la malla, això significa que calia trobar algun format de fitxer que descrigués les alçades d'una superfície i implementar un lector per aquest format. La disponibilitat de fitxers DEM que descriuen l'illa de Hawaii\footnote{http://duff.geology.washington.edu/data/raster/tenmeter/hawaii/} amb alçades cada 10 metres juntament amb el fet que l'illa de Hawaii tingui una orografia tan espectacular ens va fer decidir a implementar un lector d'aquest format de fitxer i no d'un altre.
\paragraph{}
El format DEM\footnote{Especificació: http://rockyweb.cr.usgs.gov/nmpstds/acrodocs/dem/2DEM0198.PDF} va ser creat per l'USGS \textit{(United States Geological Survey)} per guardar la informació de les seves mesures de la superfície dels Estats Units. El lector del format DEM que s'implementarà no tindrà en compte tots els casos extrems que es poden donar segons l'especificació del format per dues raons, la primera és que l'objectiu d'aquest lector no és el lector en si mateix sinó proporcionar dades per comprovar el funcionament de l'algorisme ROAM, el segon i encarà més definitiu és que tots els fitxers DEM que s'han trobat usen el mateix subconjunt de l'especificació, cosa que fa pensar que l'USGS va dissenyar un format molt extens però al final va acabar usant una petita part d'aquest format.

\section{Objectius assolits}
\paragraph{}
A data d'avui s'ha programat una primera versió de les classes que es faran servir per l'algorisme. Aquesta primera versió de les classes no ha de ser la definitiva ja que es basa sobre un disseny inicial ràpid  i només s'ha programat per a arribar a comprendre millor el funcionament de l'algorisme. Amb aquestes classes s'ha implementat parts de l'algorisme que permeten controlar manualment la partició i fusió dels triangles de forma que es poden detectar possibles errors en la seva implementació més facilment que si es programa l'algorisme de forma que fusioni/particioni els triangles automàticament, ja que si es fan mil particions és molt complicat assegurar-se que els triangles que s'han particionat eren realment els que s'havien de partir.
\paragraph{}
També s'ha dissenyat e implementat la simple interfície d'usuari descrita a l'apartat \ref{subsec:ig}. El lector del format DEM està també parcialment implementat de forma que es poden obtenir les dades dels fitxers.

\newpage
\section{Planificació del treball a realitzar}
El treball que queda per realitzar és:
\begin{enumerate}
\item Especificació final del sistema
\item Disseny final de les classes
\item Modificació de les classes existents per acomodar-se al disseny final
\item Acabar d'implementar l'algorisme (partició/fusió automàtica dels triangles)
\item Millores sobre l'algorisme (View-frustrum culling, ...)
\item Provar que el funcionament sigui correcte
\item Redactar la memòria del projecte
\end{enumerate}

\begin{center}
\includegraphics{horari.png}
\newline
\figurename{ 1 - Planificació del treball restant}
\end{center}

\end{document}
